# やること
LEDを点滅させるプログラム・回路を作り、実際に点滅させます。
初めてマイコン工作をする人が多いと思うので、難しい単語は噛み砕いて説明します。細かいことは後々やっていきましょう。
最初からやろうとすると、知らない単語・概念が連続し、普通にやる気が失せます。
最初は「そういうものか」と思って進めてください。

### ちょっと調べた人へ
プログラミング言語にも様々なものがありますが、 この講座ではC++という名前のプログラミング言語を使います。

C++はプログラミング言語のなかでも主流の文法を使っているらしいので、C++が書ければ他の多くの言語もすぐに書けるようになります。
もしかしたら「C++は難しいので初心者向けでない」という話を聞いたことがあるかもしれません。確かにC++には複雑な面があります。
しかし、C++も全てが複雑なわけではありません。初めの部分はむしろ簡単です。
どのコースも順番に進めていくことで、必要な知識・概念がつくため、複雑なところもそこまで複雑だと思わずに進めることが出来ます。

そしてなにより、この講座が目指すところは、マイコンを用いて様々なことが、誰から見てもわかりやすいコードで開発できることです。多少複雑なことも可読性のためには必須な知識となります。ぜひ最後まで頑張ってください。

- [やること](#やること)
    - [ちょっと調べた人へ](#ちょっと調べた人へ)
- [部品説明](#部品説明)
    - [ブレッドボード](#ブレッドボード)
    - [ジャンパー線](#ジャンパー線)
    - [ESP32](#esp32)
    - [LED](#led)
    - [抵抗器](#抵抗器)
- [Lチカをしよう](#lチカをしよう)
  - [プログラム説明](#プログラム説明)
    - [// ~~~](#-)
    - [#include \<Arduino.h\>](#include-arduinoh)
    - [int](#int)
    - [void setup(){}](#void-setup)
    - [void loop(){}](#void-loop)
    - [pinMode(pinNumber, Mode);](#pinmodepinnumber-mode)
    - [digitalWrite(pinNumber, State);](#digitalwritepinnumber-state)
- [ボタン押したら光る。回路のみ](#ボタン押したら光る回路のみ)
- [ボタン押したら光る。マイコン介して](#ボタン押したら光るマイコン介して)
  - [if elseを用いる1](#if-elseを用いる1)
  - [if elseを用いる2](#if-elseを用いる2)
  - [if elseを用いる3](#if-elseを用いる3)
  - [三項演算子「（条件式）? (真のときの処理) : (偽のときの処理);」を用いる](#三項演算子条件式-真のときの処理--偽のときの処理を用いる)
- [setup、loopはクソ](#setuploopはクソ)
  - [理由](#理由)

# 部品説明
### ブレッドボード
通称ブレボ。内部は下図のように疼痛しているため、配線材を用いて配線することで回路の試験が出来ます。
あくまで試験であって本番用のものではありません。というのも、ブレッドボードを用いた場合回路的な数値が不確実で、意図した動作が全くしない可能性があります。そのため、本番用の基板はユニバーサル基板を用いるか、プリント基板（下写真のようなそこらへんの電気製品の中に入っている回路を業者に頼むかしましょう。

### ジャンパー線
配線材。ブレボや様々な端子に指して配線することが出来るもの。電気的な配線材のほぼ全てにオスメスの概念があり、ジャンパー線も例にもれず、下写真に示すようにオスメスがある。

### ESP32
マイクロコンピュータ、通称マイコンの一つ。MCU(Micro Controller Unit()?)と略記されることもある。
プログラミング言語がたくさん種類があるように、マイコンにも、PIC・mbed・Arduino・STマイコン・ラズパイなどなど、様々な種類があり、そのうちの一つである。
他のマイコンにない特徴として、なにか部品を用意せずともBluetooth、Wifiが使えることが大きな特徴だ。スペック的に他の部分では他のマイコンのほうが強いので、この講座をある程度進め、ESP32を使う必要性がなかったら、他に乗り換えたほうがいいと思われる。乗り換え先としておすすめなのは、STマイコン、特にNucleoと呼ばれるシリーズである。

### LED
Light Emitting Diode（光放出ダイオード）の略。物理的に言えば、電気エネルギーを光エネルギー（と若干の熱エネルギー）に変えるもの。どこかで見たかもことがあるかもしれないが、**ダイオードと呼ばれる素子のほぼ全ては、下図のように一方向にしか電気を流さない。**
<下図>
LEDの回路記号と、ESP32の電池の役割をするピンにつなげて点灯させる回路図・写真を下に示す。ぜひ試してほしい。
LEDの極性は、電気が流れる方向によって＋ーが分けられている。**＋側をアノード、ー側をカソードという。**

### 抵抗器
電流を制限する回路素子の一つ。上で示したLEDを点灯させる回路を身近な他の例で示すと下図のようになる。

抵抗器は水の流量を制限するバルブだと思ってくれればいい。
**LEDを用いるときはLEDのアノードとセットで使いましょう**

# Lチカをしよう
※　講座1.~ではキーポイントを示し、プログラムを考えて作ってもらうが、ピリオド以下がない講座では、コピペがおいてある。講座Nからは自分で考えてもらうようにする。

回路図

写真

プログラム　コピペ用
```c++
//標準機能を使えるようにする
#include <Arduino.h>

//マイコンのピンの指定
constexpr int pin = 13;

//void setup(){ここ}　は一度だけ実行される。
void setup(){
    //指定したピンがどのような働きをするか決める。今回は出力専用。
    pinMode(pin, OUTPUT);
}

//void loop(){ここ}　は、マイコンの電源が入っている間無限に繰り返される。
void loop(){
    //指定したピンから3.3Vを出力する
    digitalWrite(pin, HIGH);
    //0.5秒プログラムの処理を止める。delayは遅延させるという意味
    delay(500);
    //指定したピンから0Vを出力する。つまり、出力を止める
    digitalWrite(pin, LOW);
    delay(500);
}
```
## プログラム説明
### // ~~~
コメントアウトと呼ばれるプログラムの記法で、実際の処理には一切関係ない。可読性を上げるには必須のもの。
「〜; // 〜」　とコメントが短ければ（主観）書いても良い。文章量に依存する。

### #include <Arduino.h>
様々な機能を使うためのおまじない。
後々正体が判明し、自分で生成出来るようになるが、今はここまででおけ。

### int
```c++
constexpr int pins = 13;
```
この部分のそこそこ正確なイメージ図
<図>

コンピューターは様々な値を取り扱う。例えば文字や文字列、自然数、マイナスの整数値、小数点以下がある実数など。
このような分類がなされている理由は、コンピューターの仕組み上、それらすべてを同様に扱うことが出来ないからだ。


そして、プログラムを書く際、数値がそのまま書かれていると、その数値がなにを表すか理解できない。
そのため、変数というものに代入して扱い、可読性を上げる仕組みがC++には備わっている。
また、変数の取り扱う数値がどのようなものか、を示してから変数を用意することで更に可読性を上げることが出来る。


上のプログラムは　13　という整数値をpinsという変数に代入して扱うという宣言である。
**intは＋ー含めた整数値**を取り扱うという意味なので、この宣言でエラーは起きない。
constexprはこの講座の最後の方に扱う。かなり難しいので、ピンの指定のときに使うと覚えておこう。

### void setup(){}
マイコンの電源が投入されて一番最初に、コンピューターが処理（実行）し、それ以後一回も実行されない部分。
この記法は普通のc++にはない。そのためこの記事の一番最後で、一般的なc++のコードにするような（に見えるような）工夫を示す。

### void loop(){}
無限回コンピューターが処理（実行）する部分。
この記法も同様に、普通のc++にはない。そのためこの記事の一番最後で、一般的なc++のコードにするような（に見えるような）工夫を示す。

### pinMode(pinNumber, Mode);
指定したピンがどのような働きをするか決める。今回は出力専用。
他にも
```cpp
pinMode(pin, INPUT);
```
とすれば入力専用になる。

### digitalWrite(pinNumber, State);
指定したピンの出力を指定する。
StateをHIGHにすると1、すなわち出力する、すなわちピンの電圧が3.3Vになる。
StateをLOWにすると0、すなわち出力しない、すなわちピンの電圧が0Vになる。
このような1/0の動作はいわゆるデジタルな動きで、上記のように様々な表現がされる。が、だいたいは上だけ。

# ボタン押したら光る。回路のみ
今回は回路図のみで頑張ってもらう。
一応ヒントと答えの写真も載せておくので、わからなかったら順次見てほしい。
正解の動作は上の通り、ボタンを押したら光ること。ボタンを押して光れば正解である。ただ、ショートにだけは気をつけてほしい。**また、前の章でも書いたとおりLEDのアノードと抵抗器はセットで扱ってほしい。じゃないとマイコンが死ぬ→数千円のお支払いが待っている**

<detail>
<summary>ヒント</summary>
</detail>

<detail>
<summary>ヒント</summary>
</detail>

# ボタン押したら光る。マイコン介して
## if elseを用いる1
```cpp
void loop(){
    bool pinstate;
    pinstate = digitalRead();
    if( pinstate == true ){
        digitalWrite(,HIGH);
    } else{
        digitalWrite(,LOW);
    }
}
```

## if elseを用いる2
```c++
void loop(){
    if( digitalRead() == true ){
        digitalWrite(,HIGH);
    } else{
        digitalWrite(,LOW);
    }
}
```

## if elseを用いる3

```c++
if(digitalRead()){
    ~
}
```

## 三項演算子「（条件式）? (真のときの処理) : (偽のときの処理);」を用いる
書いて

# setup、loopはクソ
## 理由
* main関数がないのキモい→実はあるらしい
* スコープ→まじでゴミ
* mainで慣れておくとよい